package com.amadeus.drools.rule.parser;

import java.util.ArrayList;

import org.drools.core.command.assertion.AssertEquals;
import org.junit.Test;

import com.amadeus.drools.rule.model.Attribute;
import com.amadeus.drools.rule.model.Rule;
import static org.junit.Assert.*;

public class RuleParserTest {
	String path = System.getProperty("user.dir") + "/src/main/resources/com/amadeus/drools/rule/parser/";

	@Test
	public void testParseSimpleRule(){
		RuleParser rp = new RuleParser();
		rp.setUp(path+"rules2.drl");
		ArrayList<Rule>rules = (ArrayList<Rule>) rp.parseDrlRule();
		for(Rule rule : rules){
			if(rule.getName().equals("eval rule")){
					Attribute attribut = new Attribute();
					attribut.setName("noloop");
					assertTrue(rule.getAttributes().contains(attribut));
			}
		}
	}
	
	@Test
	public void testParseSimpleEvalRule(){
		RuleParser rp = new RuleParser();
		rp.setUp(path+"rulesEval.drl");
		rp.parseDrlRule();
	}

}
